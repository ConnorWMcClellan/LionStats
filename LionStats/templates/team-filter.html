<!DOCTYPE html>
{% extends 'navbar.html' %}
{% load static %}
<html lang="en">
<head>
    {% block css %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script type="application/javascript" src="{% static 'js/dropdown.js' %}"></script>
    <link href="https://fonts.googleapis.com/css?family=Zen+Dots&display=swap" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="{% static 'styles/team-filter.css' %}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>
    {% endblock %}
    {% block title %}
    <title>Team Filter</title>
    {% endblock %}
</head>

<body>
{% block team-filter %}
<div class="current"></div>
{% endblock %}

{% block content %}


<div class ="chart">
    <button type="button" id = "chartBtn" onclick="chart()">Load Chart</button>
    <canvas id ="teamChart" width="800px" height="500px"></canvas>
</div>
<script>
{% block jquery %}
function chart(){
var endpoint = '/api/team/data'
var teamData = []
var labels = []
$.ajax({
    method: "GET",
    url: endpoint,
    success: function(data){
<!--        labels = data.labels-->
        teamData = data.default
        console.log(teamData[0])
        var ctx = document.getElementById('teamChart').getContext('2d');
        var teamChart = new Chart(ctx, {
          type: 'bar',
          data:{
          labels: labels,
          datasets: [{
            label: 'Duration',
            data: [teamData[0]],
            backgroundColor: "Red",
            borderWidth: 1
          }, {
            label: 'eTrimp',
            data: [teamData[1]],
            backgroundColor: "Orange",
            borderWidth: 1
          }, {
            label: 'sTrimp',
            data: [teamData[2]],
            backgroundColor: "Yellow",
            borderWidth: 1
          }, {
            label: 'EXP',
            data: [teamData[3]],
            backgroundColor: "Green",
            borderWidth: 1
          }, {
            label: 'HR90',
            data: [teamData[4]],
            backgroundColor: "Blue",
            borderWidth: 1
          }, {
            label: 'DIST',
            data: [teamData[5]],
            backgroundColor: "Purple",
            borderWidth: 1
          }, {
            label: 'HSR',
            data: [teamData[6]],
            backgroundColor: "Indigo",
            borderWidth: 1
          }, {
            label: 'SPNT',
            data: [teamData[7]],
            backgroundColor: "Pink",
            borderWidth: 1
          }, {
            label: 'HSR/SP',
            data: [teamData[8]],
            backgroundColor: "LightBlue",
            borderWidth: 1
          }, {
            label: 'rEXP',
            data: [teamData[9]],
            backgroundColor: "DarkRed",
            borderWidth: 1
          }, {
            label: 'rDIST',
            data: [teamData[10]],
            backgroundColor: "DarkOrange",
            borderWidth: 1
          }, {
            label: 'rHSR',
            data: [teamData[11]],
            backgroundColor: "Aquamarine",
            borderWidth: 1
          }, {
            label: 'rSPNT',
            data: [teamData[12]],
            backgroundColor: "DarkOrchid",
            borderWidth: 1
          }]
          },
           options: {
                legend: {
                    display: true,
                    position: 'bottom'
                }
            }
        });

        },
    error: function(error_data){
        console.log("error")
        console.log(error_data)
    }
})
}
{% endblock %}
</script>
<div class="content">
    <div class="Athlete">
        <h4> Athletes </h4>
        <div class="Dropdown">

                <select name = "dropdown" class="menu" id = "dropdownAthlete" multiple="multiple" onchange="athletes()">

                </select>
                <script>
                function athletes()
                {
                    var selected = $('#dropdownAthlete').val();
<!--                    var myJson = JSON.stringify(selected);-->
<!--                    console.log(selected);-->
                    console.log(selected);
                    let csrftoken = '{{ csrf_token }}';
                    $.ajax({
                    url:'/athlete/',
                    type: "POST",
                    dataType: "json",
                    headers:{'X-CSRFToken': csrftoken},
                    data: {'value' : selected,},
                    });
                }
                </script>
        </div>
    </div>

<!--    <div class="Position">-->
<!--        <h4> Position </h4>-->
<!--        <div class="Dropdown">-->
<!--&lt;!&ndash;            <nav>&ndash;&gt;-->
<!--                <select name = "position" class="menu" id = "dropdownPosition">-->
<!--                </select>-->
<!--&lt;!&ndash;            </nav>&ndash;&gt;-->
<!--        </div>-->
<!--    </div>-->

    <div class="Session">
        <h4> Session </h4>
        <button type="button" id = "sessionBtn">Load Sessions</button>
        <div class="Dropdown">
<!--            <nav>-->
                <select name = "session" class="menu" id = "dropdownSession" onchange="session()">
                </select>
<!--            </nav>-->
                <script>
                function session()
                    {
                        var selected = $('#dropdownSession').val();
                        console.log(selected);
                        let csrftoken = '{{ csrf_token }}';
                        $.ajax({
                        url:'/session/',
                        type: "POST",
                        headers:{'X-CSRFToken': csrftoken},
                        data: {'value' : selected,},
                        dataType: "json",
                        });
                    }
                </script>
        </div>
    </div>

    <div class="AcademicYear">
        <h4> Start/End Date </h4>
        <div class="Dropdown">
<!--            <nav>-->
<!--               <select name = "year" class="menu" id = "dropdownYear">-->
<!--                </select>-->
                <input type="date" name = "start" id="myStartDate" onchange="startDateTeam()">
            <script>
                    function startDateTeam()
                    {
                        var selected = $('#myStartDate').val();
                        console.log(selected);
                        let csrftoken = '{{ csrf_token }}';
                        $.ajax({
                        url:'/startdate/',
                        type: "POST",
                        headers:{'X-CSRFToken': csrftoken},
                        data: {'value' : selected,},
                        dataType: "json",
                        });
                    }
                </script>
                <input type="date" id="myEndDate" onchange="endDateTeam()">
            <script>
                    function endDateTeam()
                    {
                        var selected = $('#myEndDate').val();
                        console.log(selected);
                        let csrftoken = '{{ csrf_token }}';
                        $.ajax({
                        url:'/enddate/',
                        type: "POST",
                        headers:{'X-CSRFToken': csrftoken},
                        data: {'value' : selected,},
                        dataType: "json",
                        });
                    }
                </script>
<!--            </nav>-->
        </div>
    </div>

<!--    <div class="StatisticType">-->
<!--        <h4> Statistic Type </h4>-->
<!--        <div class="Dropdown">-->
<!--            <nav>-->
<!--                <label for="touchType"><span>Type</span></label>-->
<!--                <input type="checkbox" id="touchType">-->

<!--                <ul class="menu">-->
<!--                <li><a href="#">Type 1</a></li>-->
<!--                <li><a href="#">Type 2</a></li>-->
<!--                <li><a href="#">Type 3</a></li>-->
<!--                <li><a href="#">Type 4</a></li>-->
<!--                </ul>-->
<!--            </nav>-->
<!--        </div>-->
<!--    </div>-->
</div>

<!--<canvas id="teamStats">-->

<!--</canvas>-->
{% endblock %}
</body>

</html>
